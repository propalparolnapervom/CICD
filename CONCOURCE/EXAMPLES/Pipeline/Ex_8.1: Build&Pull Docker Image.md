# EXAMPLE 8.1 PIPELINE: Build&Pull Docker Image



Create pipeline:
  - there's a `git` repo with Dockerfile
  - Create a Pipeline to:
    - checkout that `git` repo
    - build Docker image
    - pull just built Docker image to Docker Hub


# RUN

Create a Task File `pipeline.yml`
```
---
jobs:
- name: xbs_local_job                                       #Any random name
  public: true
  plan:
    - get: xbs_source_resource                              #Download resource described further in the file
    - put: xbs_destination_resource                         #Push built image to this remote resource, described further in the file
      params:
        build: xbs_source_resource                          #The path of a dir containing a Dockerfile to build
        tag_file: xbs_source_resource/tag_f_in_repo.txt     #Full path to the file in the downloaded resource with some tag (if any)
        tag_as_latest: true                                 #In addition, tag the pushed image as "latest" 
        
        
            
resources:
- name: xbs_source_resource
  type: git
  source:
    uri: https://github.com/xbu/test.git
    branch: master

- name: xbs_destination_resource
  type: docker-image
  source:
    email: se@ukr.net
    username: xbu
    password: xbu
    repository: xbu/autogenerated
```


> Note: To push created Docker image to Docker Hub namespace has to be used, the same one as Docker Hub user name.

> For example, here `xbu/autogenerated` was used instead of just `autogenerated`




# SET PIPELINE

Set up Pipeline from just created Task File.
```
fly -t tutorial sp -c pipeline.yml -p devops311-local
```

Unpause Pipeline (if needed)
```
fly -t tutorial up -p devops311-local
```












